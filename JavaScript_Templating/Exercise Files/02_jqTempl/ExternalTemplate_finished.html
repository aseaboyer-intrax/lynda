<!DOCTYPE html>
<html>
    <head>
        <title>External jQuery Template Example</title>
        <link rel="stylesheet" href="../styles.css">
        <script type="text/javascript" src="../jquery-1.10.2.min.js"></script>
        <script type="text/javascript" src="../jquery.loadTemplate-1.3.2.js"></script>
        <script type="text/javascript">
         var curPage = 1;
         var templateData = null;
		 function loadData ( jsonList, page ) { // load the template from the external file
			var options = { paged:true, pageNo: page, elemPerPage: 2 };
			$("#container").loadTemplate("template.html", jsonList, options );
		 }
		
         $("document").ready(function() {
			$.ajax({
				dataType: "json",
				url: 'list.json'
			}).done(function( data ) {
				templateData = data.list;
				loadData( data.list, 1 );
			})
			.fail(function() {
				console.log( "error loading json" );
			});
            
			$.addTemplateFormatter("UpperSpace", function(value, options) {
               return value.replace(/([a-z])([A-Z])/g, "$1 $2");
            });
             $.addTemplateFormatter("EmailLink", function(value, options) {
                 return "<a href='mailto:" + value + "'>" + value + "</a>";
             });
			
			document.querySelector("#prevPage").addEventListener("click", function (evt) {
				if (curPage > 1) {
					loadData(templateData, --curPage);
				}
			});
			document.querySelector("#nextPage").addEventListener("click", function (evt) {
				if (curPage < 4) {
					loadData(templateData, ++curPage);
				}
			});
         });
        </script>
    </head>
    <body>
        <h1>External Templates with jQuery Template</h1>
        <h3>This example loads an external template from an HTML file</h3>
        <!-- This is the container where the templates will be instantiated -->
        <div id="container"></div>
        <button id="prevPage">Previous</button>
        <button id="nextPage">Next</button>
    </body>
</html>
